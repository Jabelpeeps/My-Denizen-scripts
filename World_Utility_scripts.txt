spawn_command:
  type: command
  debug: false
  name: spawn
  description: "Returns you to your last checkpoint. (or, if none found, the first village spawn point)" 
  usage: "just do /spawn, no args needed."
  script:
  - if <player.has_flag[respawnpoint]> teleport <player> <player.flag[respawnpoint]>
    else teleport <player> 'l@88,141,-337,frozen_spring'

Quests_command:
  type: command
  debug: false
  name: quests
  description: "Lists the quests you have discovered, and your status in each."
  usage: "just do /quests, no args needed."
  script:
  - if !<player.has_flag[QuestList]||false> {
    - narrate "You have not discovered any list-able quests yet."
    - queue clear }
  - narrate "----------------------------------------------------"
  - narrate "So far, you have discovered the following quests..."
  - wait 5t
  - foreach <player.flag[QuestList].as_list> {
    - if '<player.has_flag[%value% Cooldown]>' define expiry ', Repeatable in:- <player.flag[%value% Cooldown].expiration.formatted|||>' else define expiry ' '
    - narrate "%value%, <player.flag[%value%]>%expiry%"
    - wait 5t }
  - narrate "----------------------------------------------------"
  
world_events:
  type: world
  debug: false
  events:
    on world loads:
      - execute as_server 'citizens reload'

    on player kills entity:    
    # provides emeralds on mob kills (including mob-type npc's)

      # clear queue if victim is not a mob AND is not an npc.
      - if !<context.entity.is_mob> && !<context.entity.is_npc> queue clear
      # further select-out passive mobs and players
      - if 'sheep|horse|wolf|chicken|cow|pig|squid|bat|player' contains <context.entity.entity_type> queue clear

      # remaining kills should be player killing hostile mobs, therefore give random loot.
      - define loot <util.random.int[1].to[100]>
      - if %loot% >= 75 {
        - give i@emerald qty:2 to:<context.damager.inventory> 
        - queue clear }
      - if %loot% >= 35 {
        - give i@emerald qty:1 to:<context.damager.inventory> 
        - queue clear }

